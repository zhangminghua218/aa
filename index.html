<html>
	<head>
	<title></title>
	<script type="text/javascript">
		var SHAKE_THRESHOLD = 300;
		var last_update = 0;
		var x = y = z = last_x = last_y = last_z = 0;
		
		function init() {
			if (window.DeviceMotionEvent) {
				window.addEventListener('devicemotion', deviceMotionHandler, false);
			} else {
				alert('not support mobile event');
			}
		}

		function deviceMotionHandler(eventData) {
			var acceleration = eventData.accelerationIncludingGravity;

			var curTime = new Date().getTime();
			if ((curTime - last_update) > 100) {
				var diffTime = curTime - last_update;
				last_update = curTime;
				x = acceleration.x;
				y = acceleration.y;
				z = acceleration.z;
				var speed = Math.abs(x + y + z - last_x - last_y - last_z) / diffTime * 10000;

				if (speed > SHAKE_THRESHOLD) {
					//navigator.getUserMedia({video:true},function(){alert('111');},function(){alert('222');});
				
				
					if(navigator.getUserMedia){
						alert("哈哈，摇动了error");
						navigator.getUserMedia(‘video’,success,error);
					}else{
						alert("哈哈，摇动了ok");	
					}
					
				}
			}
				last_x = x;
				last_y = y;
				last_z = z;
			}
		}
		init();
		
		function success(){
			alert(1);
		}
		
		function error(){
			alert(2);
		}
	</script>
	</head>
	<body>
		
	</body>
</html>
